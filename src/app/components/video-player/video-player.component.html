<div class="video-player-container">
  <div id="youtube-player"></div>

  <!-- Old TV Effect Canvas -->
  <canvas #staticCanvas class="tv-static-canvas" [class.channel-switch]="showChannelSwitchStatic()"
    [class.active]="oldTVEnabled() || showChannelSwitchStatic()"></canvas>

  <!-- Transparent overlay to block all interaction with video -->
  <div class="interaction-blocker" (click)="toggleMute()"></div>

  <!-- MTV Logo with Channel -->
  <div class="nmtv-logo-container" [style.display]="showChannelSwitchStatic() ? 'none' : 'flex'">
    <div class="logo-channel-group">
      <img src="/images/nmtv-logo.png" alt="NMTV" class="nmtv-logo">
      <div class="channel-info-row">
        @if (currentChannelConfig()) {
        <div class="channel-badge">{{ currentChannelConfig()!.icon }} {{ currentChannelConfig()!.name }}</div>
        }
      </div>
      @if (!isAndroidTv()) {
      <button class="header-menu-btn" (click)="toggleMenu()">
        <i class="bi bi-list"></i>
      </button>
      }
    </div>
    @if (currentVideo() && !currentVideo().isBumper) {
    @if (currentChannel() === 'live') {
    @if (currentVideo().artist && currentVideo().song) {
    <div class="playlist-name-badge">{{ currentVideo().artist }} - {{ currentVideo().song }}</div>
    } @else if (currentVideo().title) {
    <div class="playlist-name-badge">{{ currentVideo().title }}</div>
    }
    } @else if (queueService.currentPlaylistLabel()) {
    <div class="playlist-name-badge">{{ queueService.currentPlaylistLabel() }}</div>
    }
    }
  </div>

  <!-- Tap to Unmute Message (iOS only) -->
  @if (showUnmuteMessage()) {
  <div class="unmute-message">
    <div class="unmute-content">
      <i class="bi bi-volume-mute-fill unmute-icon"></i>
      <div class="unmute-text-group">
        <div class="unmute-label">MUTED</div>
        <div class="unmute-subtext">TAP TO UNMUTE</div>
      </div>
    </div>
  </div>
  }

  <!-- Playing Now Overlay -->
  @if (overlayState().playingNow.visible && currentVideo()) {
  <div class="overlay playing-now" [class.animating-out]="overlayState().playingNow.animating">
    <div class="overlay-content">
      <div class="label">PLAYING NOW</div>
      @if (currentVideo()!.artist && currentVideo()!.song) {
      <div class="artist">{{ currentVideo()!.artist }}</div>
      <div class="song">{{ currentVideo()!.song }}</div>
      } @else {
      <div class="title">{{ currentVideo()!.title }}</div>
      }
      @if (currentVideo()!.year) {
      <div class="year">({{ currentVideo()!.year }})</div>
      }
    </div>
  </div>
  }

  <!-- Playing Next Overlay -->
  @if (overlayState().playingNext.visible && upcomingVideo()) {
  <div class="overlay playing-next" [class.animating-out]="overlayState().playingNext.animating">
    <div class="overlay-content">
      <div class="label">COMING UP NEXT</div>
      @if (upcomingVideo()!.artist && upcomingVideo()!.song) {
      <div class="artist">{{ upcomingVideo()!.artist }}</div>
      <div class="song">{{ upcomingVideo()!.song }}</div>
      } @else {
      <div class="title">{{ upcomingVideo()!.title }}</div>
      }
      @if (upcomingVideo()!.year) {
      <div class="year">({{ upcomingVideo()!.year }})</div>
      }
    </div>
  </div>
  }

  <!-- Vintage Channel Indicator -->
  @if (showVintageChannelIndicator() && currentChannelConfig()) {
  <div class="vintage-channel-indicator">
    CH {{ currentChannelConfig()!.name }}
  </div>
  }

  <!-- Vintage Volume Indicator -->
  @if (showVolumeIndicator()) {
  <div class="volume-indicator">
    <div class="volume-label">VOLUME</div>
    <div class="volume">
      <div class="volume-bar">
        @for (block of [].constructor(20); track $index) {
        <div class="volume-block" [class.active]="$index < (volumeLevel() / 5)"></div>
        }
      </div>
      <div class="volume-number">{{ volumeLevel() }}</div>
    </div>
  </div>
  }
</div>